# Netlify 部署配置文件
# 用于配置 Netlify Functions 和构建设置

[build]
  # 构建命令：安装依赖
  command = "npm install"
  # 发布目录（Netlify Functions 不需要发布目录，但需要指定）
  publish = "."
  # Functions 目录：指定 Netlify Functions 的位置
  # Express 应用需要包装为 serverless function 才能在 Netlify 上运行
  functions = "netlify/functions"

# 重定向规则
# 将所有请求重定向到 Netlify Function，这样 Express 应用才能正常工作
[[redirects]]
  from = "/*"
  to = "/.netlify/functions/server"
  status = 200

# 环境变量配置说明
# ⚠️ 重要：需要在 Netlify 控制台的 "Site settings" -> "Environment variables" 中配置以下环境变量：
# 
# 必需的环境变量：
# - LEANCLOUD_APP_ID: LeanCloud 应用 ID（必需）
# - LEANCLOUD_APP_KEY: LeanCloud 应用 Key（必需）
# 
# 可选的环境变量：
# - LEANCLOUD_SERVER_URL: LeanCloud 服务器地址（可选，默认为 https://leancloud.cn）
#
# 配置步骤：
# 1. 登录 Netlify 控制台
# 2. 选择你的站点 → "Site settings" → "Environment variables"
# 3. 点击 "Add variable" 添加上述环境变量
# 4. 保存后重新部署站点
#
# 详细说明请查看：NETLIFY_DEPLOY.md

